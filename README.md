# yarn-ec2-starter-p3p1

The starter package for 15719 (Spring 2018) Project 3, Part 1.

- `src/` contains source code for your policy server.
	- Of the files in `src`, the only file you should modify is `PhaseOnePolicyServerHandler.h`, which contains the `Schedule` method that assigns jobs to nodes based on the policy passed in the constructor.
	- You **SHOULD NOT** modify the `Makefile` or any other source files.
- `lib/` contains the `rapidjson` library. You should not modify any files in this folder.
- `test/` contains cluster and traces for your testing convenience.
	- You **SHOULD NOT** modify `test/submit-job-trace-mixed-v2.txt` or `test/simulation-traces/test-job-trace.json`.
- `generate_conf.sh` generates the configuration `job-conf.json` describing jobs submitted to the cluster.
- `kill_jobs.sh` kills jobs that are running on the YARN cluster.
	- `kill_jobs.sh` needs to be run as `root`.
- `replay_trace.sh` replays traces and takes in 2 arguments.
	- `-c` specifies the job configuration. You should only use `job-conf.json` generated by `generate_conf.sh`.
	- `-t` specifies the trace file. Sample traces are provided in `test/`.
	- `replay_trace.sh` must be run as `root`.
- `run_policy_server.sh` restarts the policy server and invokes `generate_conf.sh` with the policy specified.
	- `--policy` specifies the policy to use. The parameter and argument need to be separated by `=`.
	- You should not need to use the `--server` flag.
- `run_simulator.sh` runs the scheduling interface simulator and takes in 3 positional arguments.
	- The first argument specifies the policy.
	- The second argument specifies the path to the input trace file. A sample trace file is provided in `test/simulation-traces/`.
	- The third argument specifies path to the output file for the simulator.
- `submit_p3p1.sh` performs submission for grading and takes one positional argument.
	- `sim` performs the submission for simulation.
	- `cluster` performs runs a job trace on the cluster in addition to performing the submission for simulation.

Please refer to the writeup on The Project Zone for more details on the project.
